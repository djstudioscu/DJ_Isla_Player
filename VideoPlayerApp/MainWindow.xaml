<Window x:Class="VideoPlayerApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vlc="clr-namespace:LibVLCSharp.WPF;assembly=LibVLCSharp.WPF"
        Title="DJ Isla Player"
        Width="920"
        Height="520"
        Background="#121212"
        AllowDrop="True"
        Focusable="True"
        PreviewKeyDown="Window_PreviewKeyDown"
        DragOver="Window_DragOver"
        Drop="Window_Drop">

    <!-- ================== ESTILOS ================== -->
    <Window.Resources>

        <!-- Botones con iconos -->
        <Style x:Key="IconButton" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="6"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>

        <!-- Menú oscuro -->
        <Style TargetType="Menu">
            <Setter Property="Background" Value="#1A1A1A"/>
            <Setter Property="Foreground" Value="White"/>
        </Style>

        <Style TargetType="MenuItem">
            <Setter Property="Background" Value="#1A1A1A"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Padding" Value="10,5"/>
        </Style>

        <Style TargetType="ContextMenu">
            <Setter Property="Background" Value="#1A1A1A"/>
            <Setter Property="Foreground" Value="White"/>
        </Style>

    </Window.Resources>

    <Grid MouseMove="Grid_MouseMove">

        <!-- MENÚ SUPERIOR -->
        <Menu VerticalAlignment="Top">
            <MenuItem Header="Archivo">
                <MenuItem Header="Abrir" Click="Open_Click"/>
                <Separator/>
                <MenuItem Header="Salir" Click="Exit_Click"/>
            </MenuItem>

            <MenuItem Header="Reproducción">
                <MenuItem Header="Play" Click="Play_Click"/>
                <MenuItem Header="Pause" Click="Pause_Click"/>
                <MenuItem Header="Stop" Click="Stop_Click"/>
            </MenuItem>

            <!-- Menú de formato de pantalla -->
            <MenuItem Header="Pantalla">
                <MenuItem Header="16:9" Click="Aspect_16_9_Click"/>
                <MenuItem Header="4:3" Click="Aspect_4_3_Click"/>
                <MenuItem Header="Ajustar a pantalla" Click="Aspect_Fit_Click"/>
            </MenuItem>

            <!-- 🔥 HISTORIAL -->
            <MenuItem Header="Historial" x:Name="HistoryMenu"/>

            <MenuItem Header="Ayuda">
                <MenuItem Header="Acerca de" Click="About_Click"/>
            </MenuItem>
        </Menu>

        <!-- VIDEO -->
        <vlc:VideoView x:Name="videoView"
                       Margin="0,28,0,86"/>

        <!-- CONTROLES -->
        <Border x:Name="ControlsPanel"
                VerticalAlignment="Bottom"
                Background="#1A1A1A"
                Padding="12"
                Opacity="1">

            <StackPanel>

                <!-- Barra progreso -->
                <Slider x:Name="progressBar"
                        IsMoveToPointEnabled="True"
                        PreviewMouseUp="ProgressBar_MouseUp"/>

                <DockPanel Margin="0,8,0,0">

                    <!-- Tiempo -->
                    <TextBlock x:Name="timeText"
                               Foreground="#AAAAAA"
                               Text="00:00 / 00:00"
                               DockPanel.Dock="Left"
                               VerticalAlignment="Center"/>

                    <!-- Botones -->
                    <StackPanel Orientation="Horizontal"
                                HorizontalAlignment="Center">

                        <Button Style="{StaticResource IconButton}" Click="Rewind_Click">
                            <Image Source="Assets/rewind.png" Width="24"/>
                        </Button>

                        <Button Style="{StaticResource IconButton}" Click="Play_Click">
                            <Image Source="Assets/play.png" Width="24"/>
                        </Button>

                        <Button Style="{StaticResource IconButton}" Click="Pause_Click">
                            <Image Source="Assets/pause.png" Width="24"/>
                        </Button>

                        <Button Style="{StaticResource IconButton}" Click="Forward_Click">
                            <Image Source="Assets/forward.png" Width="24"/>
                        </Button>

                    </StackPanel>

                    <!-- Volumen + Fullscreen -->
                    <StackPanel Orientation="Horizontal"
                                DockPanel.Dock="Right">

                        <Image Source="Assets/volume.png"
                               Width="20"
                               Margin="0,0,5,0"/>

                        <Slider x:Name="volumeSlider"
                                Width="90"
                                Minimum="0"
                                Maximum="1"
                                Value="0.5"
                                ValueChanged="VolumeSlider_ValueChanged"
                                VerticalAlignment="Center"/>

                        <Button Style="{StaticResource IconButton}"
                                Click="ToggleFullScreen">
                            <Image Source="Assets/fullscreen.png" Width="20"/>
                        </Button>

                    </StackPanel>

                </DockPanel>
            </StackPanel>
        </Border>

    </Grid>
</Window>
